<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

    <!-- Boton create Invoice-->
        <record id="sale_order_view_form" model="ir.ui.view">
            <field name="name">sale.order.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_management.sale_order_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='%(sale.action_view_sale_advance_payment_inv)d'][1]" position="replace">
                    <field name="is_comercial" invisible="1"/>
                    <button name="%(sale.action_view_sale_advance_payment_inv)d"
                            string="Create Invoice"
                            type="action"
                            class="btn-primary"
                            attrs="{'invisible':
                            ['|',   ('invoice_status', '!=', 'to invoice'),
                                    ('is_comercial', '=', True)]}"/>
                </xpath>
                <xpath expr="//button[@name='%(sale.action_view_sale_advance_payment_inv)d'][2]" position="replace">
                        <button name="%(sale.action_view_sale_advance_payment_inv)d"
                        string="Create Invoice"
                        type="action"
                        context="{'default_advance_payment_method': 'percentage'}"
                        attrs="{'invisible': True}"/>/>
                </xpath>
                 <!-- Boton de cancelar pedido -->
               <!-- <xpath expr="//button[@name='action_cancel']" position="replace">
                    <button name="action_cancel"  type="object" string="Cancel" attrs="{'invisible': [('is_comercial', '=', True)]}"/>
                </xpath> -->
                <!-- Fin boton cancelar pedidos -->
            </field>
        </record>
    <!-- Fin boton create Invoice -->
    <!-- Botones de stock picking all done-->
        <record id="view_order_form_inherit_comercial" model="ir.ui.view">
            <field name="name">view.order.form.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_order_picking_all_done.view_order_form_inherit"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_sale_order_confirm_and_delivery']" position="replace">
                <field name="is_comercial" invisible="1"/> -->
                <!-- Pedido sin confirmar(Presupuesto-->
                    <button name="action_sale_order_confirm_and_delivery" string="Confirm and delivery"
                            type="object" attrs="{'invisible': [('state', 'not in', ['draft'])]}"/>
                </xpath>
                <xpath expr="//button[@name='action_sale_order_confirm_and_invoiced']" position="replace">
                    <button name="action_sale_order_confirm_and_invoiced" string="Confirm and invoiced"
                            type="object" attrs="{'invisible': ['|',('state', 'not in', ['draft']),('is_comercial','=',True)]}"/>
                </xpath>
                <!-- Pedido confirmado(Pedido de ventas)-->
             <xpath expr="//button[@name='action_sale_order_delivery']" position="replace">
                    <button name="action_sale_order_delivery" string="Delivery all"
                            type="object" attrs="{'invisible': ['|',('invoice_status', 'in', ['invoiced']),('state','==','draft')]}"/>
                </xpath>
                <xpath expr="//button[@name='action_sale_order_delivery_and_invoiced']" position="replace">
                    <button name="action_sale_order_delivery_and_invoiced" string="Delivery and invoiced"
                            type="object" attrs="{'invisible': ['|',('invoice_status', 'in', ['invoiced']),'|',('state','==','draft'), ('is_comercial','=',True)]}"/>
                </xpath>
                <!--Fin Botones stock picking all done -->
            </field>
        </record>
        <!-- Ocultar margen en ventas -->
        <record id="view_order_form_inherit_without_margin" model="ir.ui.view">
            <field name="name">view.order.form.inherit.without.margin</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_margin.sale_margin_sale_order"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='margin']" position="replace">
                    <field name="margin" invisible="1"/>
                </xpath>
            </field>
        </record>
        <!-- Fin Ocultar margen en ventas -->
    </data>
</odoo>
